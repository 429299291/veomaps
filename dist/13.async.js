(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{BzdX:function(e,a,t){"use strict";var n=t("TqRt"),r=t("284h");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("IzEo");var i=n(t("bx4M")),s=n(t("lwsE")),c=n(t("W8MJ")),l=n(t("a1gu")),o=n(t("Nsbk")),d=n(t("7W2i"));n(t("pVnL")),n(t("J4zp")),n(t("QILm"));t("Znn+");var u=n(t("ZTPi"));t("iQDF");var f,p,m=n(t("+eQT")),h=r(t("q1tI")),g=t("MuoO"),k=t("LLXN"),D=t("34ay"),v=n(t("CkN6")),y=n(t("v99g")),I=t("+n12"),M=(t("eHHv"),t("PQp+"),t("1pet"),n(t("wd/R"))),A=n(t("rBGm")),E=(h.default.Fragment,m.default.RangePicker),P=(0,D.getAuthority)(),C=u.default.TabPane,b=(f=(0,g.connect)(function(e){var a=e.areas,t=e.performance,n=e.geo;return{geo:n,performance:t,selectedAreaId:a.selectedAreaId,areaNames:a.areaNames}}),f(p=function(e){function a(e){var t;return(0,s.default)(this,a),t=(0,l.default)(this,(0,o.default)(a).call(this,e)),t.state={rangePickerValue:(0,I.getTimeDistance)("month")},t.columns=[{title:"First Name",dataIndex:"firstName"},{title:"Last Name",dataIndex:"lastName"},{title:"Battery Swap Pickups",dataIndex:"actionData.batterySwapPickUpCount",sorter:!0},{title:"Battery Swap Dropoffs",dataIndex:"actionData.batterySwapDropOffCount",sorter:!0},{title:"Maintenance Pickups",dataIndex:"actionData.maintenancePickUpCount",sorter:!0},{title:"Maintenance Dropoffs",dataIndex:"actionData.maintenanceDropOffCount",sorter:!0},{title:"Rebalance Pickups",dataIndex:"actionData.rebalancePickUpCount",sorter:!0},{title:"Rebalance Dropoffs",dataIndex:"actionData.rebalanceDropOffCount",sorter:!0}],t.setClickedMarker=function(e){t.setState({selectedMarker:e})},t.selectDate=function(e){t.setState({rangePickerValue:(0,I.getTimeDistance)(e)})},t.handleRangePickerChange=function(e){t.props.dispatch;t.setState({rangePickerValue:e},t.loadBarCharData)},t.countTechPickups=function(e){var a=t.props.performance.technicianMetricsData;if(void 0===a||null===a)return"N/A";a.reduce(function(a,t){return parseInt(t[e])+a},0)},t.getAreaGeoInfo=function(){var e=t.props.selectedAreaId,a=t.props.dispatch;a({type:"geo/getCenter",areaId:e})},t}return(0,d.default)(a,e),(0,c.default)(a,[{key:"componentDidMount",value:function(){this.getTechnicianData()}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e({type:"dashboard/clear"}),cancelAnimationFrame(this.reqRef),clearTimeout(this.timeoutId),clearInterval(this.pollingId)}},{key:"getRangeEnd",value:function(e){var a=(0,M.default)();return e.diff(a,"seconds")>0?a:e}},{key:"getTechnicianData",value:function(){var e=this.props,a=e.dispatch,t=e.selectedAreaId;if(t){var n=this.state.rangePickerValue;P.includes("get.technician.metrics")&&a({type:"performance/getTechnicianMetricsData",params:Object.assign({},{areaId:t,start:(0,M.default)(n[0]).utcOffset(0).format("MM-DD-YYYY HH:mm:ss"),end:(0,M.default)(n[1]).utcOffset(0).format("MM-DD-YYYY HH:mm:ss")})})}}},{key:"componentDidUpdate",value:function(e,a,t){this.props.selectedAreaId&&(a.rangePickerValue!==this.state.rangePickerValue&&this.getTechnicianData(),e.selectedAreaId!==this.props.selectedAreaId&&(this.getTechnicianData(),this.getAreaGeoInfo()))}},{key:"isActive",value:function(e){var a=this.state.rangePickerValue,t=(0,I.getTimeDistance)(e);return a[0]&&a[1]&&a[0].isSame(t[0],"day")&&a[1].isSame(t[1],"day")?A.default.currentDate:""}},{key:"render",value:function(){var e=this,a=this.props.performance,t=(a.technicianMetricsData,h.default.createElement("div",{className:A.default.salesExtraWrap},h.default.createElement("div",{className:A.default.salesExtra},h.default.createElement("a",{className:this.isActive("day"),onClick:function(){return e.selectDate("day")}},h.default.createElement(k.FormattedMessage,{id:"app.analysis.all-day",defaultMessage:"All Day"})),h.default.createElement("a",{className:this.isActive("week"),onClick:function(){return e.selectDate("week")}},h.default.createElement(k.FormattedMessage,{id:"app.analysis.all-week",defaultMessage:"All Week"})),h.default.createElement("a",{className:this.isActive("month"),onClick:function(){return e.selectDate("month")}},h.default.createElement(k.FormattedMessage,{id:"app.analysis.all-month",defaultMessage:"All Month"})),h.default.createElement("a",{className:this.isActive("year"),onClick:function(){return e.selectDate("year")}},h.default.createElement(k.FormattedMessage,{id:"app.analysis.all-year",defaultMessage:"All Year"}))),h.default.createElement(E,{value:this.state.rangePickerValue,onChange:this.handleRangePickerChange,style:{width:256}}))),n=this.props,r=n.geo,s=n.selectedAreaId;r.area&&r.area.center;return h.default.createElement(y.default,null,s&&h.default.createElement(i.default,null,h.default.createElement(u.default,{tabBarExtraContent:t,size:"large",tabBarStyle:{marginBottom:24}},h.default.createElement(C,{tab:"Technicians",key:"Technicians"},h.default.createElement(v.default,{data:{list:this.props.performance.technicianMetricsData},columns:this.columns,scroll:{x:1300}})))))}}]),a}(h.Component))||p),w=b;a.default=w}}]);