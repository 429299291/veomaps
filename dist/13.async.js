(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"67cV":function(e,t,a){"use strict";var l=a("284h"),r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("DjyN");var n=r(a("NUBc"));a("IzEo");var d=r(a("bx4M")),c=r(a("lwsE")),i=r(a("W8MJ")),u=r(a("a1gu")),o=r(a("Nsbk")),s=r(a("7W2i")),f=l(a("q1tI")),m=(r(a("s+Rv")),r(a("MLAF"))),p=function(e){function t(e){var a;(0,c.default)(this,t),a=(0,u.default)(this,(0,o.default)(t).call(this,e));e.vehicles;return a.state={expandItem:null},a}return(0,s.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.state,t=(e.selectedRowKeys,e.needTotalList,this.props),a=t.vehicles,l=t.getResponsiveVehicleInfo,r=t.selectedVehicleId,c=t.totalCount,i=t.onPageChange;t.selectedVehicleRefresh;return f.default.createElement("div",null,a.map(function(e){return f.default.createElement(d.default,{key:e.id,className:m.default.card},l(e,r))}),f.default.createElement(n.default,{style:{marginTop:"1em"},defaultCurrent:1,total:c,onChange:i}))}}]),t}(f.PureComponent),h=p;t.default=h},MLAF:function(e,t,a){e.exports={card:"antd-pro-pages-vehicle-responsive-list-card"}},"m1+7":function(e,t,a){e.exports={tableList:"antd-pro-pages-vehicle-vehicle-tableList",tableListOperator:"antd-pro-pages-vehicle-vehicle-tableListOperator",tableListForm:"antd-pro-pages-vehicle-vehicle-tableListForm",submitButtons:"antd-pro-pages-vehicle-vehicle-submitButtons"}},nAvq:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("pVnL"));a("IzEo");var d=l(a("bx4M"));a("sRBo");var c=l(a("kaz8"));a("giR+");var i=l(a("fyUT"));a("+L6B");var u=l(a("2/Rp"));a("14J3");var o=l(a("BMrR"));a("Pwec");var s=l(a("CtXQ"));a("jCWc");var f=l(a("kPKH")),m=l(a("MVZn"));a("/zsF");var p=l(a("PArb")),h=l(a("lwsE")),v=l(a("W8MJ")),E=l(a("a1gu")),g=l(a("Nsbk")),y=l(a("7W2i"));a("2qtc");var b=l(a("kLXV"));a("7Kak");var S=l(a("9yH6"));a("OaEy");var k=l(a("2fM7"));a("5NDa");var C=l(a("5rEg"));a("FJo9");var w=l(a("L41K"));a("y8nQ");var V=l(a("Vl3Y"));a("Znn+");var M,I,T,A=l(a("ZTPi")),L=r(a("q1tI")),D=a("MuoO"),F=l(a("wd/R")),R=l(a("CkN6")),P=l(a("zHco")),N=l(a("m1+7")),x=l(a("MQ4l")),U=a("0bUC"),B=(l(a("j+jj")),l(a("itZA"))),Y=a("34ay"),H=a("+n12"),z=l(a("fqRC")),O=l(a("67cV")),q=A.default.TabPane,G=(0,Y.getAuthority)(),j=V.default.Item,W=(w.default.Step,C.default.TextArea,k.default.Option),K=(S.default.Group,["Unlock","lock"]),J=["Bicycle","Scooter","E-Bike","Car"],_=["Normal","Error","Auto Error","Deactivated","Waiting for Activation"],Z=function(e){var t=(0,F.default)(e).format("YYYY-MM-DD HH:mm:ss");return t},Q={vehicleId:"vehicleId",vehicleNumber:"vehicleNumber",vehicleType:"vehicleType",lockStatus:"lockStatus",isReported:"isReported",areaId:"areaId",imei:"imei",errorStatus:"errorStatus",connectStatus:"connectStatus",power:"power",vehiclePower:"vehiclePower",isTurnedOn:"isTurnedOn",heartTime:"heartTime",wirelessTech:"wirelessTech",mac:"mac",iccid:"iccid",firmware:"firmware",lat:"lat",lng:"lng",key:"vehicleId"},X=function(e){return e>=420?100:e<420&&e>=411?95+5*(e-411)/9:e<411&&e>=395?90+5*(e-395)/16:e<395&&e>=386?80+10*(e-386)/9:e<386&&e>=379?70+10*(e-379)/7:e<379&&e>=373?60+10*(e-373)/6:e<373&&e>=369?50+10*(e-369)/4:e<369&&e>=365?40+10*(e-365)/4:e<365&&e>=363?30+10*(e-363)/2:e<363&&e>=359?20+10*(e-359)/4:e<359&&e>=354?10+10*(e-354)/5:e<354&&e>340?10*(e-340)/14:0},$=V.default.create()(function(e){var t=e.modalVisible,a=e.form,l=e.handleAdd,r=e.handleModalVisible,n=e.areas,d=function(){a.validateFields(function(e,t){e||(a.resetFields(),t.vehicleNumber=parseInt(t.vehicleNumber,10),l(t))})};return L.default.createElement(b.default,{destroyOnClose:!0,title:"Add",visible:t,onOk:d,onCancel:function(){return r()},width:"700px"},L.default.createElement(j,{labelCol:{span:5},wrapperCol:{span:15},label:"ID"},a.getFieldDecorator("vehicleNumber",{rules:[{required:!0,message:"At least 8 Digits!",min:1}]})(L.default.createElement(C.default,{placeholder:"Please Input"}))),L.default.createElement(j,{labelCol:{span:5},wrapperCol:{span:15},label:"IMEI"},a.getFieldDecorator("imei",{rules:[{required:!0,message:"At least 15 Digits!",min:1}]})(L.default.createElement(C.default,{placeholder:"Please Input"}))),L.default.createElement(j,{labelCol:{span:5},wrapperCol:{span:15},label:"Mac Address"},a.getFieldDecorator("mac",{rules:[{required:!0,message:"At least 8 Digits!",min:1}]})(L.default.createElement(C.default,{placeholder:"Please Input"}))),L.default.createElement(j,{labelCol:{span:5},wrapperCol:{span:15},label:"Type"},a.getFieldDecorator("vehicleType",{rules:[{required:!0,message:"You have pick a type"}]})(L.default.createElement(k.default,{placeholder:"select",style:{width:"100%"}},L.default.createElement(W,{value:"0"},"Bike"),L.default.createElement(W,{value:"1"},"Scooter"),L.default.createElement(W,{value:"2"},"E-Bike")))),n&&L.default.createElement(j,{labelCol:{span:5},wrapperCol:{span:15},label:"Area"},a.getFieldDecorator("areaId",{rules:[{required:!0,message:"You have pick a area"}]})(L.default.createElement(k.default,{placeholder:"select",style:{width:"100%"}},n.map(function(e){return L.default.createElement(W,{key:e.id,value:e.id},e.name)})))))}),ee=V.default.create()(function(e){var t=e.form,a=e.modalVisible,l=e.handleUpdate,r=e.handleModalVisible,n=e.areas,d=e.record,c=function(){t.isFieldsTouched()?t.validateFields(function(e,a){e||(t.resetFields(),a.vehicleNumber=parseInt(a.vehicleNumber,10),l(d.id,a))}):r()};return L.default.createElement(b.default,{destroyOnClose:!0,title:"Update",visible:a,onOk:c,onCancel:function(){return r()}},L.default.createElement(j,{labelCol:{span:5},wrapperCol:{span:15},label:"ID"},t.getFieldDecorator("vehicleNumber",{rules:[{required:!0,message:"At least 8 Digits!",min:1}],initialValue:d.vehicleNumber+""})(L.default.createElement(C.default,{placeholder:"Please Input"}))),L.default.createElement(j,{labelCol:{span:5},wrapperCol:{span:15},label:"Lock Status"},t.getFieldDecorator("lockStatus",{initialValue:d.lockStatus})(L.default.createElement(k.default,{placeholder:"select",style:{width:"100%"}},L.default.createElement(W,{value:0},"Unlock"),L.default.createElement(W,{value:1},"Lock")))),L.default.createElement(j,{labelCol:{span:5},wrapperCol:{span:15},label:"Error Status"},t.getFieldDecorator("errorStatus",{initialValue:d.errorStatus})(L.default.createElement(k.default,{placeholder:"select",style:{width:"100%"}},_.map(function(e,t){return L.default.createElement(W,{key:t,value:t},e)})))),L.default.createElement(j,{labelCol:{span:5},wrapperCol:{span:15},label:"Type"},t.getFieldDecorator("vehicleType",{rules:[{required:!0,message:"You have pick a type"}],initialValue:d.vehicleType})(L.default.createElement(k.default,{placeholder:"select",style:{width:"100%"}},L.default.createElement(W,{value:0},"Bike"),L.default.createElement(W,{value:1},"Scooter"),L.default.createElement(W,{value:2},"E-Bike")))),n&&L.default.createElement(j,{labelCol:{span:5},wrapperCol:{span:15},label:"Area"},t.getFieldDecorator("areaId",{rules:[{required:!0,message:"You have pick a area"}],initialValue:d.areaId})(L.default.createElement(k.default,{placeholder:"select",style:{width:"100%"}},n.map(function(e){return L.default.createElement(W,{key:e.id,value:e.id},e.name)})))))}),te=(M=(0,D.connect)(function(e){var t=e.vehicles,a=e.areas,l=e.loading,r=e.geo,n=e.global;return{vehicles:t,areas:a.data,selectedAreaId:a.selectedAreaId,loading:l.models.vehicles,areaNames:a.areaNames,isMobile:n.isMobile,geo:r}}),I=V.default.create(),M(T=I(T=function(e){function t(){var e,a;(0,h.default)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=(0,E.default)(this,(e=(0,g.default)(t)).call.apply(e,[this].concat(r))),a.state={modalVisible:!1,updateModalVisible:!1,detailModalVisible:!1,expandForm:!1,selectedRows:[],vehicleLocations:[],filterCriteria:{currentPage:1,pageSize:10},selectedRecord:{},selectedMarker:null,selectedTab:"1",shouldShowHeatMap:!1},a.columns=[{title:"ID",dataIndex:"vehicleNumber"},{title:"Power",dataIndex:"power",render:function(e){return L.default.createElement("p",null,(0,U.roundTo2Decimal)(X(e))+"%")}},{title:"Status",dataIndex:"connectStatus",render:function(e,t){return L.default.createElement(L.Fragment,null,L.default.createElement("span",null,K[t.lockStatus]),L.default.createElement(p.default,{type:"vertical"}),L.default.createElement("span",null,_[t.errorStatus]),L.default.createElement(p.default,{type:"vertical"}),L.default.createElement("span",null,a.isConnected(t)))}},{title:"HeartTime",dataIndex:"heartTime",sorter:!0,render:function(e){return L.default.createElement("span",null,Z(e))}},{title:"Ride Count",dataIndex:"rideCount",sorter:!0,render:function(e){return L.default.createElement("span",null,e)}},{title:"Last Ride Time",dataIndex:"lastRideTime",sorter:!0,render:function(e){return L.default.createElement("span",null,(0,F.default)(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"Type",dataIndex:"vehicleType",render:function(e){return L.default.createElement("p",null,J[e])}},{title:"Vehicle Power",dataIndex:"vehiclePower",render:function(e){return L.default.createElement("p",null,"".concat(e,"%"))}},{title:"operation",render:function(e,t){return L.default.createElement(L.Fragment,null,L.default.createElement("a",{onClick:function(){return a.handleUpdateModalVisible(!0,t)}},"Update"),L.default.createElement(p.default,{type:"vertical"}),L.default.createElement("a",{onClick:function(){return a.handleDetailModalVisible(!0,t)}},"Detail"))}}],a.handleResponsiveItemClick=function(e){a.setState({selectedVehicleId:e===a.state.selectedVehicleId?null:e})},a.handleResponsivePageChange=function(e,t){var l=a.props.dispatch,r=a.state.filterCriteria,n=(0,m.default)({},r);n.currentPage=e,n.pageSize=t,a.setState({filterCriteria:n}),l({type:"vehicles/get",payload:n})},a.handleSetSelectedVehicleRefresh=function(e){a.setState({selectedVehicleRefresh:e})},a.changeLockStatus=function(e){var t=a.props.dispatch,l=1===e.lockStatus?"vehicles/unlock":"vehicles/lock";("vehicles/unlock"===l&&G.includes("unlock.vehicle")||"vehicles/lock"===l&&G.includes("lock.vehicle"))&&t({type:l,id:e.id,onSuccess:function(){setTimeout(function(){a.handleSearch()},3e3)}})},a.updateLocation=function(e){var t=a.props.dispatch;t({type:"vehicles/updateLocation",id:e,onSuccess:function(){setTimeout(function(){a.handleSetSelectedVehicleRefresh(!0)},4e3)}})},a.alertVehicle=function(e){var t=a.props.dispatch;t({type:"vehicles/alertVehicle",vehicleId:e})},a.getResponsiveVehicleInfo=function(e,t){var l=a.state.selectedVehicleRefresh,r=(0,U.roundTo2Decimal)(X(e.power)),n=0===e.vehicleType?r:e.vehiclePower,d=function(e){return e>60?"#04e508":e<40?"#e81309":"#EFAF13"},c=t===e.id;return L.default.createElement("div",{key:e.id,style:{textAlign:"center",fontSize:"3.5vw"}},L.default.createElement(o.default,null,L.default.createElement(f.default,{span:6},J[e.vehicleType]),c&&L.default.createElement(f.default,{offset:16,span:2},L.default.createElement(s.default,{type:"redo",onClick:function(){a.handleSearch(),a.handleSetSelectedVehicleRefresh(!0)}}))),c&&L.default.createElement(o.default,{style:{marginTop:"1em"}},L.default.createElement(x.default,{record:e,selectedVehicleRefresh:l,handleSetSelectedVehicleRefresh:a.handleSetSelectedVehicleRefresh})),c&&L.default.createElement(o.default,{style:{marginTop:"1em"}},L.default.createElement(f.default,{span:12}," Lock Power : ",L.default.createElement("span",{style:{color:d(r)}}," ",r," % "),"  "),L.default.createElement(f.default,{span:12}," Vehicle Power : ",L.default.createElement("span",{style:{color:d(e.vehiclePower)}},"  ",e.vehiclePower," % "),"  ")),c&&L.default.createElement(o.default,{style:{marginTop:"1em"}},L.default.createElement(f.default,{span:8},"Ride Count"),L.default.createElement(f.default,{span:8},"Heart Time"),L.default.createElement(f.default,{span:8},"Last Ride")),c&&L.default.createElement(o.default,null,L.default.createElement(f.default,{span:8},e.rideCount),L.default.createElement(f.default,{span:8},(0,F.default)(e.heartTime).format("YYYY-MM-DD HH:mm:ss")),L.default.createElement(f.default,{span:8},(0,F.default)(e.lastRideTime).format("YYYY-MM-DD HH:mm:ss"))),L.default.createElement(o.default,{style:{marginTop:"1em"}},L.default.createElement(f.default,{span:6}," ",e.vehicleNumber," "),L.default.createElement(f.default,{span:11},L.default.createElement("span",null,L.default.createElement(s.default,{type:1===e.lockStatus?"lock":"unlock",style:{color:1===e.lockStatus?"blue":"orange"}})," | "),L.default.createElement("span",{style:{color:0===e.errorStatus?"#04e508":"red"}},_[e.errorStatus])," | ",L.default.createElement("span",{style:{color:1===e.connectStatus?"#04e508":"red"}},a.isConnected(e))),L.default.createElement(f.default,{span:7},"Battery: ",L.default.createElement("span",{style:{color:d(n)}}," ",n+"%"," ")," ")),c&&L.default.createElement(o.default,{style:{marginTop:"1em"}},L.default.createElement(f.default,{span:5},G.includes("unlock.vehicle")?L.default.createElement("a",{onClick:function(){return a.changeLockStatus(e)}},0===e.lockStatus&&1===e.vehicleType?"Lock":"Unlock"):L.default.createElement("span",{style:{color:"grey"}},0===e.lockStatus&&1===e.vehicleType?"Lock":"Unlock")),L.default.createElement(f.default,{span:5,style:{fontSize:"2.5vw"}},G.includes("update.vehicle.location")?L.default.createElement("a",{onClick:function(){return a.updateLocation(e.id)}},"Update Location"):L.default.createElement("span",{style:{color:"grey"}},"Update Location")),L.default.createElement(f.default,{span:5},G.includes("alert.vehicle")?L.default.createElement("a",{onClick:function(){return a.alertVehicle(e.id)}},"Beep"):L.default.createElement("span",{style:{color:"grey"}},"Beep")),L.default.createElement(f.default,{span:5},L.default.createElement("a",{onClick:function(){return a.handleUpdateModalVisible(!0,e)}},"Update")),L.default.createElement(f.default,{span:4},L.default.createElement("a",{onClick:function(){return a.handleDetailModalVisible(!0,e)}},"Detail"))),L.default.createElement(o.default,{style:{marginTop:"1em",marginBottom:"0px"},onClick:function(){return a.handleResponsiveItemClick(e.id)}},c?L.default.createElement(s.default,{type:"up"}):L.default.createElement(s.default,{type:"down"})))},a.handleGetListVehicles=function(){var e=a.props.dispatch,t=a.state.filterCriteria;e({type:"vehicles/getCount",payload:t}),e({type:"vehicles/get",payload:t})},a.handleStandardTableChange=function(e,t,l){var r=a.props.dispatch,n=a.state.filterCriteria,d=(0,m.default)({},n);d.currentPage=e.current,d.pageSize=e.pageSize,l.field&&(d.sorter="".concat(l.field,"_").concat(l.order)),a.setState({filterCriteria:d}),r({type:"vehicles/get",payload:d})},a.handleFormReset=function(){var e=a.props,t=e.form,l=(e.dispatch,a.state.filterCriteria);t.resetFields();var r={currentPage:1,pageSize:l.pageSize};a.setState({filterCriteria:r},function(){return a.handleSearch()})},a.toggleForm=function(){var e=a.state.expandForm;a.setState({expandForm:!e})},a.handleSearch=function(e){"object"===typeof e&&e.preventDefault();var t=a.props,l=(t.dispatch,t.form),r=t.selectedAreaId,n=a.state,d=n.filterCriteria,c=n.selectedTab;l.validateFields(function(e,t){if(!e){var l=Object.assign({},d,t,{currentPage:1,pageSize:10,areaId:r});t.vehiclePowerCustom&&(l.vehiclePower=t.vehiclePowerCustom),a.setState({filterCriteria:l},function(){switch(c){case"1":a.handleGetListVehicles();break;case"2":a.handleGetMapData();break;default:return}})}})},a.handleUpdateAllLocations=function(e){"object"===typeof e&&e.preventDefault();var t=a.props,l=t.dispatch,r=t.form,n=t.selectedAreaId,d=a.state,c=d.filterCriteria;d.selectedTab;r.validateFields(function(e,t){if(!e){var r=Object.assign({},c,t,{currentPage:1,pageSize:10,areaId:n});a.setState({filterCriteria:r},function(){return l({type:"vehicles/updateAllLocations",payload:c,areaId:n})})}})},a.handleModalVisible=function(e){a.setState({createModalVisible:!!e})},a.handleUpdateModalVisible=function(e,t){a.setState({updateModalVisible:!!e,selectedRecord:t||{}})},a.handleDetailModalVisible=function(e,t){a.setState({detailModalVisible:!!e,selectedRecord:t||{}})},a.handleDeleteModalVisible=function(e,t){a.setState({updateModalVisible:!!e,selectedRecord:t||{}})},a.handleAdd=function(e){var t=a.props.dispatch;t({type:"vehicles/add",payload:e}),a.handleModalVisible()},a.handleUpdate=function(e,t){var l=a.props.dispatch;l({type:"vehicles/update",payload:t,id:e,onSuccess:a.handleGetListVehicles}),a.handleUpdateModalVisible()},a.getAreaGeoInfo=function(){var e=a.props,t=e.dispatch,l=e.selectedAreaId;t({type:"geo/getFences",areaId:l}),t({type:"geo/getCenter",areaId:l})},a.setClickedMarker=function(e){a.setState({selectedMarker:e})},a.hadnleTabChange=function(e){a.setState({selectedTab:e},a.handleSearch)},a.getAreaStartPoints=function(){var e=a.props,t=e.dispatch,l=e.selectedAreaId;t({type:"vehicles/getStartPoints",areaId:l,onSuccess:function(e){return a.setState({areaStartPoints:e})}})},a.handleGetMapData=function(){var e=a.props.selectedAreaId;e>=1&&(a.getVehicleLocations(),a.getAreaGeoInfo(),G.includes("get.area.start.points")&&a.getAreaStartPoints())},a.formatCsvData=function(e){return e.map(function(e){return e.heartTime=(0,F.default)(e.heartTime).format("YYYY-MM-DD HH:mm:ss"),e})},a}return(0,y.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){this.handleSearch()}},{key:"isConnected",value:function(e){return 1===e.connectStatus?"online":"offline"}},{key:"componentDidUpdate",value:function(e,t,a){e.selectedAreaId!==this.props.selectedAreaId&&this.handleSearch()}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return L.default.createElement(V.default,{onSubmit:this.handleSearch,layout:"inline"},L.default.createElement(o.default,{gutter:{md:8,lg:24,xl:48}},L.default.createElement(f.default,{md:8,sm:24},L.default.createElement(j,{label:"Keywords"},e("numberOrImei")(L.default.createElement(C.default,{placeholder:"number or imei"})))),L.default.createElement(f.default,{md:8,sm:24},L.default.createElement(j,{label:"Battery Status"},e("lockPower")(L.default.createElement(k.default,{placeholder:"select",style:{width:"100%"}},L.default.createElement(W,{value:"0"},"Low Battery"),L.default.createElement(W,{value:"1"},"Full Battery"),L.default.createElement(W,{value:null},"All"))))),L.default.createElement(f.default,{md:8,sm:24},L.default.createElement(j,{label:"Error Status"},e("errorStatus",{initialValue:["0","1","2","4"]})(L.default.createElement(k.default,{mode:"multiple",placeholder:"select",style:{width:"100%"}},L.default.createElement(W,{value:"0"},"Normal"),L.default.createElement(W,{value:"1"},"Error"),L.default.createElement(W,{value:"2"},"Auto Error"),L.default.createElement(W,{value:"3"},"Deactivated"),L.default.createElement(W,{value:"4"},"Waiting for Activation")))))),L.default.createElement("div",{style:{overflow:"hidden"}},L.default.createElement("div",{style:{float:"right",marginBottom:24}},L.default.createElement(u.default,{type:"primary",htmlType:"submit"},"Search"),L.default.createElement(u.default,{style:{marginLeft:8},onClick:this.handleFormReset},"Reset"),L.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"more ",L.default.createElement(s.default,{type:"down"})))))}},{key:"renderAdvancedForm",value:function(){var e=this.props.form.getFieldDecorator,t=(this.props.areas,function(e,t,a){console.log(t),void 0===t||t>0&&Number.isInteger(t)?a():a("Number must be larger than zero.")});return L.default.createElement(V.default,{onSubmit:this.handleSearch,layout:"inline"},L.default.createElement(o.default,{gutter:{md:8,lg:24,xl:48}},L.default.createElement(f.default,{md:8,sm:24},L.default.createElement(j,{label:"Keywords"},e("numberOrImei")(L.default.createElement(C.default,{placeholder:"number or imei"})))),L.default.createElement(f.default,{md:8,sm:24},L.default.createElement(j,{label:"Lock Battery Status"},e("lockPower")(L.default.createElement(k.default,{placeholder:"select",style:{width:"100%"}},L.default.createElement(W,{value:"0"},"Low Battery"),L.default.createElement(W,{value:"1"},"Full Battery"),L.default.createElement(W,{value:null},"All"))))),L.default.createElement(f.default,{md:8,sm:24},L.default.createElement(j,{label:"Error Status"},e("errorStatus",{initialValue:["0","1","2","4"]})(L.default.createElement(k.default,{mode:"multiple",placeholder:"select",style:{width:"100%"}},L.default.createElement(W,{value:"0"},"Normal"),L.default.createElement(W,{value:"1"},"Error"),L.default.createElement(W,{value:"2"},"Auto Error"),L.default.createElement(W,{value:"3"},"Deactivated"),L.default.createElement(W,{value:"4"},"Waiting for Activation")))))),L.default.createElement(o.default,{gutter:{md:8,lg:24,xl:48}},L.default.createElement(f.default,{md:8,sm:24},L.default.createElement(j,{label:"Lock Status"},e("lockStatus")(L.default.createElement(k.default,{placeholder:"select",style:{width:"100%"}},L.default.createElement(W,{value:"0"},"Unlock"),L.default.createElement(W,{value:"1"},"Lock"),L.default.createElement(W,{value:null},"All"))))),L.default.createElement(f.default,{md:8,sm:24},L.default.createElement(j,{label:"Vehicle Type"},e("vehicleType")(L.default.createElement(k.default,{placeholder:"select",style:{width:"100%"}},L.default.createElement(W,{value:"0"},"Bike"),L.default.createElement(W,{value:"1"},"Scooter"),L.default.createElement(W,{value:"2"},"e-bike"),L.default.createElement(W,{value:null},"All"))))),L.default.createElement(f.default,{md:8,sm:24},L.default.createElement(j,{label:"Connection Status"},e("connectStatus")(L.default.createElement(k.default,{placeholder:"select",style:{width:"100%"}},L.default.createElement(W,{value:"0"},"offline"),L.default.createElement(W,{value:"1"},"online"),L.default.createElement(W,{value:null},"All")))))),L.default.createElement(o.default,{gutter:{md:8,lg:24,xl:48}},L.default.createElement(f.default,{md:8,sm:24},L.default.createElement(j,{label:"Is Using"},e("isUsing")(L.default.createElement(k.default,{placeholder:"select",style:{width:"100%"}},L.default.createElement(W,{value:!0},"Yes"),L.default.createElement(W,{value:!1},"No"),L.default.createElement(W,{value:null},"All"))))),L.default.createElement(f.default,{md:8,sm:24},L.default.createElement(j,{label:"Vehicle Power Status"},e("vehiclePower")(L.default.createElement(k.default,{placeholder:"select",style:{width:"100%"}},L.default.createElement(W,{value:"0"},"Low Battery"),L.default.createElement(W,{value:"1"},"Full Battery"),L.default.createElement(W,{value:null},"All"))))),L.default.createElement(f.default,{md:8,sm:24},L.default.createElement(j,{labelCol:{span:5},wrapperCol:{span:15},label:"Idle Days"},e("idelDays",{rules:[{validator:t}]})(L.default.createElement(i.default,{placeholder:"Please Input"}))))),L.default.createElement(o.default,{gutter:{md:8,lg:24,xl:48}},L.default.createElement(f.default,{md:8,sm:24},L.default.createElement(j,{label:"Is Reported"},e("isReported")(L.default.createElement(k.default,{placeholder:"select",style:{width:"100%"}},L.default.createElement(W,{value:!0},"Yes"),L.default.createElement(W,{value:!1},"No"),L.default.createElement(W,{value:null},"All"))))),L.default.createElement(f.default,{md:12,sm:24},L.default.createElement(j,{label:"Custom Vehicle Power Search:"},e("vehiclePowerCustom")(L.default.createElement(i.default,{placeholder:"power"}))," %"))),L.default.createElement("div",{style:{overflow:"hidden"}},L.default.createElement("div",{style:{float:"right",marginBottom:24}},L.default.createElement(u.default,{type:"primary",htmlType:"submit"},"Search"),L.default.createElement(u.default,{style:{marginLeft:8},onClick:this.handleFormReset},"Reset"),L.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"close ",L.default.createElement(s.default,{type:"up"})))))}},{key:"renderForm",value:function(){var e=this.state.expandForm;return e?this.renderAdvancedForm():this.renderSimpleForm()}},{key:"getVehicleLocations",value:function(){var e=this,t=this.props,a=t.dispatch,l=(t.selectedAreaId,this.state.filterCriteria);a({type:"vehicles/getVehicleLocation",payload:l,onSuccess:function(t){return e.setState({vehicleLocations:t})}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.vehicles,l=t.areas,r=t.loading,i=t.selectedAreaId,o=t.geo,s=t.areaNames,f=o.area&&o.area.center,m=o.fences,p=this.state,h=p.createModalVisible,v=p.updateModalVisible,E=p.detailModalVisible,g=p.selectedRecord,y=p.filterCriteria,b=p.selectedMarker,S=p.selectedTab,k=p.vehicleLocations,C=p.areaStartPoints,w=p.shouldShowHeatMap,V=p.selectedVehicleId,M=p.selectedVehicleRefresh,I={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},T={handleModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate},D={defaultCurrent:1,current:y.currentPage,pageSize:y.pageSize,total:a.total};return L.default.createElement(P.default,{title:"Vehicle List"},L.default.createElement(d.default,{bordered:!1},L.default.createElement("div",{className:N.default.tableList},L.default.createElement("div",{className:N.default.tableListForm},this.renderForm()),L.default.createElement("div",{className:N.default.tableListOperator},L.default.createElement(u.default,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"Add"),i>=1&&G.includes("update.all.vehicle.location")&&L.default.createElement(u.default,{type:"primary",onClick:function(){return e.handleUpdateAllLocations()}},"Update All Locations"),L.default.createElement("span",{style:{marginLeft:"1em"}},"count: ".concat("1"===S?a.total:k.length))),L.default.createElement(A.default,{defaultActiveKey:"1",onChange:this.hadnleTabChange},L.default.createElement(q,{tab:"List View",key:"1"},this.props.isMobile?L.default.createElement(O.default,{vehicles:a.data,selectedVehicleId:V,getResponsiveVehicleInfo:this.getResponsiveVehicleInfo,selectedVehicleRefresh:M,totalCount:a.total,onPageChange:this.handleResponsivePageChange}):L.default.createElement(R.default,{loading:r,data:{list:a.data,pagination:D},columns:this.columns,onChange:this.handleStandardTableChange,scroll:{x:1300}})),i>=1&&L.default.createElement(q,{tab:"Map View",key:"2"},f&&m&&L.default.createElement(z.default,{center:f,vehicles:k,fences:m,heatMapData:C,shouldShowHeatMap:w,handleGetMapData:this.handleGetMapData,vehicleTypeFilter:{unlock:!0,lock:!0,lowBattery:!0,error:!0,errorUnlock:!0,ebike:!0},setClickedMarker:this.setClickedMarker,selectedMarker:b}),k.length>0&&L.default.createElement("div",null,L.default.createElement(u.default,{style:{marginTop:"1em"},onClick:function(){return(0,H.exportCSVFile)(Q,e.formatCsvData(k),s[i])}},"Export"),G.includes("get.area.start.points")&&L.default.createElement(c.default,{style:{marginTop:"1em",marginLeft:"1em"},defaultValue:w,onChange:function(t){return e.setState({shouldShowHeatMap:t.target.checked})}},"Show HeatMap")))))),L.default.createElement($,(0,n.default)({},I,{modalVisible:h,areas:l})),L.default.createElement(ee,(0,n.default)({},T,{modalVisible:v,record:g,areas:l})),E&&L.default.createElement(B.default,{isVisible:E,handleDetailVisible:this.handleDetailModalVisible,vehicleId:g.id,handleGetVehicles:this.handleGetListVehicles}))}}]),t}(L.PureComponent))||T)||T),ae=te;t.default=ae}}]);